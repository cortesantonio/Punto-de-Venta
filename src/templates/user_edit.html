{%extends './base.html'%}

{%block titulo%}
EDITOR DE USUARIO
{%endblock%}

{%block linkCSS%}
<link rel="stylesheet" href="{{url_for('static',filename='css/edit_user.css')}}">
{%endblock%}

{%block body%}
<div class="grid">
    <div class="formulario">
        <h1>editor de usuarios </h1>
        {% for i in data.usuario %}
        <form action="/administrar usuarios/updateUser/{{i[0]}}" method="POST">
            <label for="rut">Rut:</label>
            <input class="block" type="text" name="rut" id="" disabled value="{{i[0]}}" placeholder="Rut">
            <label class="block" for="nombres"> Nombre Completo:</label>
            <input type="text" class="w250" name="nombre" value="{{i[1]}}" id="" required placeholder="Nombre Completo">

            <label class="block" for="rol">Tipo de Usuario:</label>
            <input type="radio" name="rol" required value="0" id="">
            <label for="rol">Vendedor</label>
            <input type="radio" name="rol" required value="1" id="">
            <label for="rol">administrador</label>

            <label class="block" for="password"> Contraseña:</label>
            <input type="text" class="w250" name="password" value="{{data.password}}" id="" required
                placeholder="Contraseña">

            <button type="submit"><i class="fa-solid fa-pen-to-square"></i> Editar Usuario</button>
        </form>
        <Button onclick="cerrarVentana()">Cerrar Ventana</Button>

        {%endfor%}
    </div>
    <div class="registros">
        <h1>Registros
            <a href=""><i class="fa-solid fa-arrows-rotate"></i></a>
        </h1>
        <table>
            <thead>
                <tr>
                    <th>RUT</th>
                    <th>Nombre</th>
                    <th>rol</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for i in data.registros %}
                <tr>
                    <td>{{i[0]}}</td>
                    <td>{{i[1]}}</td>
                    <td>{{i[2]}}</td>
                    <td>
                        <a href="/administrar usuarios/deleteUser/{{i[0]}}"><i class="fa-solid fa-trash"></i></a>
                    </td>
                </tr>
                {%endfor%}
            </tbody>
        </table>

    </div>
    <script>
        function cerrarVentana() {
            //la referencia de la ventana es el objeto window del popup. Lo utilizo para acceder al método close
            window.close()
        }</script>
</div>


{%endblock%}